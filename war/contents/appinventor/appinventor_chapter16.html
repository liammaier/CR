<!DOCTYPE html>
<html lang="en-US">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />


  <head>
  	<title> App Inventor Chapter 16 </title>

  </head>

  <body>
  	<div id="appinventor16" class="appinventor container"> 
  		<div class="page">
	  			<div class="chapter_head">
					CHAPTER 16
				</div>
				<h2> Programming Your App’s Memory </h2>
	  		<section id="introduction" class="section" data-number="1" data-name="introduction">
		  		<div class="chapter_description chapter_16"> 
		  				<figure class="floatright">
			  				<img id="figure_16_0" height="300px" src="/contents/appinventor/images/figure_16_0.png">
			  			</figure>
		  				<p>
		  					<span class="first_sentence">HJust as people need to remember things, so do apps. This chapter exam- ines how you can program an app to remember information.</span> 
		  				</p>
		  				<p>
		  					When someone tells you the phone number of a pizza place for a one- time immediate call, your brain stores it in a memory slot. If someone calls out some numbers for you to add, you also store the immediate results in a memory slot. In such cases, you are not fully conscious of how your brain stores information or recalls it.
		  				</p>
		  				<p>
		  					An app has a memory as well, but its inner workings are far less mysterious than those of your brain. In this chapter, you’ll learn how to set up an app’s memory, how to store information in it, and how to retrieve that information at a later time.
		  				</p>
			  	</div> <!-- chapter description -->			  		
	  		</section> <!-- introduction dn1 -->
	  		<section class="section" data-number="2" data-name="Named Memory Slots">
				<h3>Named Memory Slots</h3>
			  	<p>
			  		<span class="first_sentence">An app’s memory consists of a set of named memory slots. Some of these memory slots are created when you drag a component into your app; these slots are called properties.</span> You can also define named memory slots that are not associated with a particular component; these are called variables. Whereas properties are typically associated with what is visible in an app, variables can be thought of as the app’s hidden “scratch” memory.
			  	</p>
			  	<div class="pagebreak">
			  		<span class="pageNumber"> 242 </span> Chapter 16: Programming Your App’s Memory
			  	</div>
			 </section> <!-- Named Memory Slots dn2 -->
			 <section class="section" data-number="3" data-name="Properties">
			 	<h3>Properties</h3>
			 	<p>
			 		<span class="first_sentence">Components—at least the visible ones like <span class="code">Button</span>, <span class="code">TextBox</span>, and <span class="code">Canvas</span>—are part of the user interface. But to the app, each component is completely defined by a set of properties. The values stored in the memory slots of each property determine how the component appears.
			 	</p>
			 	<p>
			 		You can modify property memory slots directly in the Component Designer, as shown in Figure 16-1.
			 	</p>
			 	<figure class="centered">
					<img src="/contents/appinventor/images/figure_16_1.png">
					<figcaption>
						Figure 16-1. Modifying the memory slots in the property form to change the app’s appearance
					</figcaption>
				</figure>
				<p>
					The <span class="code">Canvas</span> component of Figure 16-1 has six properties. The <span class="code">BackgroundColor</span> and PaintColor are memory slots that hold a color. The BackgroundImage holds a file- name (<span class="file_path_name">kitty.png</span>). The <span class="code">Visible</span> property holds a <span class="new_term">Boolean</span> value (true or false, depend- ing on whether the box is checked). The <span class="code">Width</span> and <span class="code">Height</span> slots hold a number or a special designation (e.g., “Fill parent”).
				</p>
				<p>
					When you change a property in the Component Designer, you are specifying how the app should appear when it’s launched. Someone using the app (the end user) never sees that there is a memory slot named <span class="code">Height</span> containing a value of 300. The end user only sees the user interface with a component that is 300 pixels tall.
				</p>
			<div class="pagebreak">
			  		<span class="pageNumber"> 243 </span> Defining Variables
			</div>
			</section> <!-- Properties dn3 -->
			<section class="section" data-number="4" data-name="Defining Variables">
				<h3>Defining Variables</h3>
				<p>
					<span class="first_sentence">Like properties, variables are named memory slots, but they are not associated with a particular component. </span>You define a variable when your app needs to remember some- thing that is not being stored within a component property. For example, a game app might need to remember what level the user has reached. If the level number were going to appear in a <span class="code">Label</span> component, you might not need a variable, because you could just store the level in the <span class="code">Text</span> property of the <span class="code">Label</span> component. But if the level number is not something the user will see, you’d define a variable to store it.
				</p>
				<p>
					The Presidents Quiz (Chapter 8) is another example of an app that needs a variable. In that app, only one question of the quiz should appear at a time in the user inter- face, while the rest of the questions are kept hidden from the user. Thus, you need to define a variable to store the list of questions.
				</p>
				<p>
					Whereas properties are created automatically when you drag a component into the Component Designer, you define a new variable explicitly in the Blocks Editor by dragging out a <span class="program_block">def variable </span>block. You can name the variable by clicking the text “variable” within the block, and you can specify an initial value by dragging out a <span class="program_block">number</span>, <span class="program_block">text</span>, <span class="program_block">color</span>, or <span class="program_block">make a list</span> block and plugging it in. Here are the steps you’d follow to create a variable called score with an initial value of 0:
				</p>
				<ol>
					<li>
						Drag the <span class="">def variable</span> block (Figure 16-2) from the Definitions folder in the Built-In blocks.
						<figure class="centered">
							<img src="/contents/appinventor/images/figure_16_2.png">
							<figcaption>
								Figure 16-2. A def variable block
							</figcaption>
						</figure>
					</li>
					<li>
						Change the name of the variable by clicking on the text “variable” and typing “score”, as illustrated in Figure 16-3.
						<figure class="centered">
							<img src="/contents/appinventor/images/figure_16_3.png">
							<figcaption>
								Figure 16-3. Changing the variable name
							</figcaption>
						</figure>
					</li>
					<li>
						Set the initial value to a number by dragging out the <span class="program_block">number</span> block and plugging it into the variable definition (Figure 16-4).
						<figure class="centered">
							<img src="/contents/appinventor/images/figure_16_4.png">
							<figcaption>
								Figure 16-4. Setting the value to a number
							</figcaption>
						</figure>
					<div class="pagebreak unlisted">
			  		<span class="pageNumber"> 244 </span> Chapter 16: Programming Your App’s Memory
			  		</div>
			  		</li>
			  		<li class="clear"><!-- 4 -->
			  			Change the initial value from the default number (123) to 0 (Figure 16-5).
			  			<figure class="centered">
							<img src="/contents/appinventor/images/figure_16_5.png">
							<figcaption>
								Figure 16-5. Setting the initial value to 0
							</figcaption>
						</figure>
			  		</li>
				</ol>
				<p>
					When you define a variable, you tell the app to set up a named memory slot for storing a value. These slots, as with properties, are not visible to the user.
				</p>
				<p>
					The initialization block you plug in specifies the value that should be placed in the slot when the app begins. Besides initializing with numbers or text, you can also place a <span class="program_block">make a list</span> block into the <span class="program_block">def var</span> block. This tells the app that the variable names a list of memory slots instead of a single value. To learn more about lists, see Chapter 19.
				</p>
			</section> <!-- Defining Variables dn4 -->
			<section class="section" data-number="5" data-name="Setting and Getting a Variable">
				<h3>Setting and Getting a Variable</h3>
				<p>
					<span class="first_sentence">When you define a variable, App Inventor creates two blocks for it, both of which appear in the My Definitions drawer, shown in Figure 16-6.</span>
				</p>
				<figure class="centered">
					<img src="/contents/appinventor/images/figure_16_6.png">
					<figcaption>
						Figure 16-6. The My Definitions drawer contains set and get blocks for your variable
					</figcaption>
				</figure>
				<p>
					The <span class="program_block">set global</span> to block lets you modify (set) the value stored in the variable. For instance, the blocks in Figure 16-7 place a 5 in the variable <span class="program_block">score</span>. The term “global” in the <span class="program_block">set global score to</span> block refers to the fact that the variable can be used in all of the program’s event handlers (globally). Some programming languages allow you to de- fine variables that are “local” to a particular part of the program; App Inventor does not.
				</p>
				<figure class="centered">
					<img src="/contents/appinventor/images/figure_16_7.png">
					<figcaption>
						Figure 16-7. Placing a number 5 into the variable score
					</figcaption>
				</figure>
				<div class="pagebreak">
			  		<span class="pageNumber"> 245 </span> Setting a Variable to an Expression
			  	</div>
			  	<p>
			  		The block labeled <span class="program_block">global score</span> helps you retrieve (get) the value of a variable. For instance, if you wanted to check if the score was 100 or greater, you’d plug the <span class="program_block">global score</span> block into an <span class="program_block">if</span> test, as demonstrated in Figure 16-8.
			  	</p>
			  	<figure class="centered">
					<img src="/contents/appinventor/images/figure_16_8.png">
					<figcaption>
						Figure 16-8. Using the global score block to get the value stored in the variable
					</figcaption>
				</figure>
			</section><!--  Setting and Getting a Variable dn5 -->
			<section class="section" data-number="5" data-name="Setting a Variable to an Expression">
				<h3>Setting a Variable to an Expression</h3>
				<p>
					<span class="first_sentence">You can put simple values like 5 into a variable, but often you’ll set the variable to a more complex <span class="new_term">expression</span> (expression is the computer science term for a formula).</span> For example, when the user clicks Next to get to the next question in a quiz app, you’ll need to set the <span class="code">currentQuestion</span> variable to one more than its current value. When someone does something bad in a game app, you might modify the score variable to <span class="emph">10 less than its current value</span>. In a game like MoleMash (Chapter 3), you change the horizontal (<span class="emph">x</span>) location of the mole to <span class="emph">a random position within a canvas</span>. You’ll build such expressions with a set of blocks that plug into a <span class="program_block">set global to</span> block.
				</p>
				<section class="subsection" data-number="6" data-name="Incrementing a Variable">
					<h4>Incrementing a Variable</h4>
					<p>
						<span class="first_sentence">Perhaps the most common expression is for incrementing a variable, or setting a vari- able based on its own current value. </span>For instance, in a game, when the player scores a point, the variable score can be incremented by 1. Figure 16-9 shows the blocks to implement this behavior.
					</p>
					<figure class="centered">
						<img src="/contents/appinventor/images/figure_16_9.png">
						<figcaption>
							Figure 16-9. Incrementing the variable score by 1
						</figcaption>
					</figure>
					<p>
						If you can understand these kinds of blocks, you’re well on your way to becoming a programmer. You read these blocks as “set the score to one more than it already is,” which is another way to say <span class="new_term">increment</span> your variable. The way it works is that the blocks are interpreted inside out, not left to right. So the innermost blocks—the <span class="program_block">global score</span> and the <span class="program_block">number 1</span> block—are evaluated first. Then the + block is per- formed and the result is “set” into the variable score.
					</p>
					<div class="pagebreak">
			  		<span class="pageNumber"> 246 </span> Chapter 16: Programming Your App’s Memory
			  		</div>
			  		<p>
			  			Supposing there were a 5 in the memory slot for score before these blocks, the app would perform the following steps:
			  		</p>
			  		<ol>
			  			<li>
			  				Retrieve the 5 from score’s memory slot.
			  			</li>
			  			<li>
			  				Add 1 to it to get 6.
			  			</li>
			  			<li>
			  				Place the 6 into score’s memory slot (replacing the 5).
			  			</li>
			  		</ol>
			  		<p>
			  			For more on incrementing, see Chapter 19.
			  		</p>
				</section> <!-- Incrementing a Variable dn9 -->
				<section class="subsection" data-number="7" data-name="Building Complex Expressions">
					<h4>Building Complex Expressions</h4>
					<p>
						<span class="first_sentence">In the Math drawer of the Built-In blocks (Figure 16-10), App Inventor provides a wide range of mathematical functions similar to those you’d find in a spreadsheet or calculator.</span>
					</p>
					<figure class="centered">
						<img src="/contents/appinventor/images/figure_16_10.png">
						<figcaption>
							Figure 16-10. The blocks contained in the Math drawer
						</figcaption>
					</figure>
					<div class="pagebreak">
			  		<span class="pageNumber"> 247 </span> Setting a Variable to an Expression
			  		</div>
			  		<p>
			  			You can use these blocks to build a complex expression and then plug them in as the <span class="new_term">righthand-side expression</span> of a set variable to block. For example, to move an image sprite to a random column within the bounds of a canvas, you’d configure an expres- sion consisting of a <span class="program_block">*</span> (multiply) block, a <span class="program_block">–</span> (subtract) block, a <span class="code">Canvas.Width</span> property, and a <span class="program_block">random fraction</span> function, as illustrated in Figure 16-11.
			  		</p>
			  		<figure class="centered">
						<img src="/contents/appinventor/images/figure_16_11.png">
						<figcaption>
							Figure 16-11. You can use math blocks to build complex expressions like this one
						</figcaption>
					</figure>
					<p>
						As with the increment example in the previous section, the blocks are interpreted by the app in an inside-out fashion. Supposing the <span class="code">Canvas</span> has a <span class="code">Width</span> of 300 and the <span class="code">ImageSprite</span> has a <span class="code">Width</span> of 50, the app would perform the following steps:
					</p>
					<ol>
						<li>
							Retrieve the 300 and the 50 from the memory slots for <span class="program_block">Canvas1.Width</span> and <span class="program_block">ImageSprite.Width</span>, respectively.
						</li>
						<li>
							Subtract: 300 – 50 = 250.
						</li>
						<li>
							Call the <span class="program_block">random fraction</span> function to get a number between 0 and 1 (say, .5).
						</li>
						<li>
							Multiply: 250 * .5 = 125.
						</li>
						<li>
							Place the 125 into the memory slot for the <span class="code">ImageSprite1.X</span> property.
						</li>
					</ol>
				</section> <!-- Building Complex Expressions dn7 -->
				<section class="subsection" data-number="8" data-name="Displaying Variables">
					<h4>Displaying Variables</h4>
					<p>
						<span class="first_sentence">When you modify a component property, as in the preceding example, the user interface is directly affected.</span> This is not true for variables; changing a variable has no direct effect on the app’s appearance. If you just incremented a variable score but didn’t modify the user interface in some other way, the user would never know there was a change. It’s like the proverbial tree falling in the forest: if nobody was there to hear it, did it really happen?
					</p>
					<p>
						Sometimes you do not want to immediately manifest a change to the user interface when a variable changes. For instance, in a game you might track statistics (e.g., missed shots) that will only appear when the game ends.
					</p>
					<p>
						This is one of the advantages of storing data in a variable as opposed to a compo- nent property: it allows you to show just the data you want when you want to show it. It also allows you to separate the computational part of your app from the user interface, making it easier to change that user interface later.
					</p>
					<div class="pagebreak">
			  		<span class="pageNumber"> 248 </span> Chapter 16: Programming Your App’s Memory
			  		</div>
			  		<p>
			  			For example, with a game you could store the score directly in a <span class="code">Label</span> or in a variable. If you store it in a <span class="code">Label</span>, you’d increment the <span class="code">Label’s Text</span> property when points were scored, and the user would see the change directly. If you stored the score in a variable and incremented the variable when points were scored, you’d need to include blocks to also move the value of the variable into a label.
			  		</p>
			  		<p>
			  			However, if you decided to change the app to display the score in a different manner, the variable solution would be easier to change. You wouldn’t need to find all the places that change the score; those blocks would be unmodified. You’d only need to modify the display blocks.
			  		</p>
			  		<p>
			  			The solution using the <span class="code">Label</span> and no variable would be harder to change, as you’d need to replace all the increment changes with, say, modifications to the Width of the label.
			  		</p>
				</section> <!-- dn8 Displaying Variables -->
			</section><!--  Setting and Getting a Variable dn5 -->
			<section class="section" data-number="9" data-name="Summary">
				<h3>Summary</h3>
				<p>
					When an app is launched, it begins executing its operations and responding to events that occur. When responding to events, the app sometimes needs to remem- ber things. For a game, this might be each player’s score or the direction in which an object is moving.
				</p>
				<p>
					Your app remembers things within component properties, but when you need addi- tional memory slots not associated with a component, you can define variables. You can store values into a variable and retrieve the current value, just like you do with properties.
				</p>
				<p>
					As with property values, variable values are not visible to the end user. If you want the end user to see the information stored in a variable, you add blocks that display that information in a label or another user interface component.
				</p>
			</section>
		</div>
	</div>	
</body>

