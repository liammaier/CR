<!DOCTYPE html>
<html lang="en-US">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />


	<head>
		<title> App Inventor Chapter 10 </title>
	</head>

  <body>
		
	<div id="appinventor10" class="appinventor container"> 
	
	<div class="page">

<!-- Page 147 -->

		<div class="chapter_head">
			CHAPTER 10
		</div>

		<section class="section" data-number="0" data-name="MakeQuiz and TakeQuiz">

			<h2>MakeQuiz and TakeQuiz</h2>

			<image class="rightImage" src="/contents/appinventor/images/ch10img01.png">

			<div class="chapter_description">
				<p class="marginBottomExtension">The Presidents Quiz app in Chapter 8 can be customized 
					to build any quiz, but the customization is restricted to 
					App Inventor programmers. Only you, as the program-mer, can modify the questions and answers; there is no 
					way for parents, teachers, or other app users to create 
					their own quizzes or change the quiz questions (unless 
					they too want to learn how to use App Inventor!).
					In this chapter, you’ll build a MakeQuiz app that lets a 
					“teacher” create quizzes using an input form. The quiz 
					questions and answers will be stored in a web database 
					so that “students” can access a separate TakeQuiz app 
					and take the test. While building these two apps, you’ll 
					make yet another significant conceptual leap and learn 
					how to create apps with user-generated data that is 
					shared across apps and among users.</p>
			</div>

			<figure class="leftfig">
				<img class="leftFigPadding" src="/contents/appinventor/images/ch10img02.png">
				<figcaption>Figure 10-1. The MakeQuiz app</figcaption>
			</figure>

			<p>MakeQuiz and TakeQuiz are two apps that work in 
				tandem and allow a “teacher” to create quizzes for a 
				“student.” Parents can create fun trivia apps for their 
				children during a long road trip, grade-school 
				teachers can build “Math Blaster” quizzes, and college 
				students can build quizzes to help their study groups 
				prepare for a final. This chapter builds on the 
				Presidents Quiz in Chapter 8, so if you haven’t 
				completed that app, you should do so before con-tinuing here.</p>

			<p>You’ll design two apps, MakeQuiz for the “teacher” 
				(see Figure 10-1) and TakeQuiz for the “student.” With 
				MakeQuiz:</p>

			<ul class="marginBottomExtension">
				<li>The user enters questions and answers in an input form.</li>
				<li>The entered question-answer pairs are displayed.</li>
			</ul>

<!-- Page 148 -->

			<div class="pagebreak">
					<span class="pageNumber"> 148 </span> Chapter 10: MakeQuiz and TakeQuiz
			</div>

			<div class="clear" />

			<ul>
				<li>The quiz questions and answers are stored in a database.</li>
			</ul>

			<p>TakeQuiz will work similarly to the Presidents Quiz app you’ve already built. In fact, 
				you’ll create it using that app as a starting point. TakeQuiz will differ in that the
				questions asked will be those that were entered into the database using MakeQuiz.</p>

		</section> <!-- Section 0, MakeQuiz and TakeQuiz -->

		<section class="section" data-number="1" data-name="What You'll Learn">

			<h3>What You'll Learn</h3>

			<p>The Presidents Quiz was an example of an app with <em>static data</em>: no matter how many 
				times you take the quiz, the questions are always the same because they are written 
				as part of the app (also known as <em>hardcoded</em>). News apps, blogs, and social network-ing apps
				like Facebook and Twitter work with <em>dynamic</em> data, meaning it can change 
				over time. Often, this dynamic information is <em>user-generated</em> — the app allows users to 
				enter, modify, and share information. With MakeQuiz and TakeQuiz, you’ll learn how 
				to build an app that handles user-generated data.<p>

			<p>If you completed the Xylophone app (Chapter 9), you’ve already been introduced to 
				dynamic lists; in that app, the musical notes the user plays are recorded in lists. Apps 
				with such user-generated data are more complex, and the blocks are more abstract 
				because they don’t rely on predefined, static data. You define list variables, but you 
				define them without specific items. As you program your app, you need to envision 
				the lists being populated with data entered by the end user.</p>

			<p>This tutorial covers the following App Inventor concepts:</p>

			<ul>
				<li>Input forms for allowing the user to enter information.</li>
				<li>Displaying items from multiple lists.</li>
				<li>Persistent data—MakeQuiz will save the quiz questions and answers in a web 
					database, and TakeQuiz will load them in from the same database.</li>
				<li>Data sharing—you’ll store the data in a web database using the
					<span class="python">TinyWebDB</span> component (instead of the
					<span class="python">TinyDB</span> component used in previous chapters).</li>
			</ul>

		</section> <!-- Section 1, What You'll Learn -->

		<section class="section" data-number="2" data-name="Getting Started">

			<h3>Getting Started</h3>

			<p>Connect to the App Inventor website and start a new project. Name it “MakeQuiz” 
				and set the screen’s title to “Make Quiz”. Open the Blocks Editor and connect to 
				your phone.</p>

		</section> <!-- Section 2, Getting Started -->

		<section class="section" data-number="3" data-name="Designing the Components">

<!-- Page 149 -->

			<div class="pagebreak">
					<span class="pageNumber"> 149 </span> Designing the Components
			</div>

			<h3>Designing the Components</h3>

			<p>Use the Component Designer to create the interface for MakeQuiz. When you finish, 
				it should look something like Figure 10-2 (there are also more detailed instructions 
				after the snapshot).</p>

			<p>You can build the user interface shown in Figure 10-2 by dragging out the compo-nents listed in
				Table 10-1. Drag each component from the Palette into the Viewer 
				and name it as specified in the table. Note that you can leave the header label names 
				(<span class="python">Label1</span> – <span class="python">Label4</span>) as
				their defaults (you won’t use them in the Blocks Editor anyway).</p>


			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img03.png">
				</div>
				<figcaption>Figure 10-2. MakeQuiz in the Component Designer</figcaption>
			</figure>

			<p class="caption">Table 10-1.All the components for the MakeQuiz app</p>

			<table>
				<thead>
					<tr>
						<th>Component type</th>
						<th>Palette Group</th>
						<th>What you'll name it</th>
						<th>Purpose</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><span class="python">TableArrangement</span></td>
						<td>ScreenArrangement</td>
						<td><span class="python">TableArrangement1</span></td>
						<td>Format the form, including the question and answer.</td>
					</tr>
					<tr>
						<td><span class="python">Label</span></td>
						<td>Basic</td>
						<td><span class="python">Label1</span></td>
						<td>The “Question:” prompt.</td>
					</tr>
					<tr>
						<td><span class="python">TextBox</span></td>
						<td>Basic</td>
						<td><span class="python">QuestionText</span></td>
						<td>The user enters questions here.</td>
					</tr>
					<tr>
						<td><span class="python">Label</span></td>
						<td>Basic</td>
						<td><span class="python">Label2</span></td>
						<td>The “Answer:” prompt.</td>
					</tr>
					<tr>
						<td><span class="python">TextBox</span></td>
						<td>Basic</td>
						<td><span class="python">AnswerText</span></td>
						<td>The user enters answers here.</td>
					</tr>
					<tr>
						<td><span class="python">Button</span></td>
						<td>Basic</td>
						<td><span class="python">SubmitButton</span></td>
						<td>The user clicks this to submit a QA pair.</td>
					</tr>
					<tr>
						<td><span class="python">Label</span></td>
						<td>Basic</td>
						<td><span class="python">Label3</span></td>
						<td>Display “Quiz Questions and Answers.”</td>
					</tr>
					<tr>
						<td><span class="python">Label</span></td>
						<td>Basic</td>
						<td><span class="python">QuestionsAnswersLabel</span></td>
						<td>Display previously entered QA pairs.</td>
					</tr>
					<tr>
						<td><span class="python">TinyWebDB</span></td>
						<td>Not ready for prime time</td>
						<td><span class="python">TinyWebDB1</span></td>
						<td>Store data to and retrieve data from the database.</td>
					</tr>
				</tbody>
			</table>

<!-- Page 150 -->

			<div class="pagebreak">
					<span class="pageNumber"> 150 </span> Chapter 10: MakeQuiz and TakeQuiz
			</div>

			<p>Set the properties of the components in the following way:</p>

			<ol>
				<li>Set the <span class="python">Text</span> of <span class="python">Label1</span> to “Question”, the
					<span class="python">Text</span> of <span class="python">Label2</span> to “Answer”, and the text of
					<span class="python">Label3</span>
					to “Quiz Questions and Answers”.</li>
				<li>Set the <span class="python">FontSize</span> of <span class="python">Label3</span> to 18 and check the
					<span class="python">FontBold</span> box.</li>
				<li>Set the <span class="python">Hint</span> of <span class="python">QuestionText</span> to
					“Enter a question” and the <span class="python">Hint</span> of <span class="python">AnswerText</span>
					to “Enter an answer”.</li>
				<li>Set the <span class="python">Text</span> of <span class="python">SubmitButton</span> to “Submit”.</li>
				<li>Set the <span class="python">Text</span> of <span class="python">QuestionsAnswersLabel</span> to
					“Questions and Answers”.</li>
				<li>Move the <span class="python">QuestionText</span>, <span class="python">AnswerText</span>,
					and their associated labels into <span class="python">TableArrangement1</span>.</li>
			</ol>

		</section> <!-- Section 3, Designing the Components -->

		<section class="section" data-number="4" data-name="Adding Behaviors to the Components">

			<h3>Adding Behaviors to the Components</h3>

			<p>As with the Presidents Quiz app, you’ll first define some <em>global variables</em> for the 
				<span clas="python">QuestionList</span> and <span clas="python">AnswerList</span>, but this time you won’t
				provide fixed questions and 
				answers. Table 10-2 lists the blocks you’ll need to define the lists.</p>

			<p class="caption">Table 10-2.Blocks for defining the question and answer lists</p>

			<table>
				<thead>
					<tr>
						<th>Block type</th>
						<th>Drawer</th>
						<th>Purpose</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><span class="pBlock">def variable</span> ("QuestionList")</td>
						<td>Definitions</td>
						<td>Define the <span class="python">QuestionList</span> variable (rename it).</td>
					</tr><tr>
						<td><span class="pBlock">def variable</span> ("An-swerList")</td>
						<td>Definitions</td>
						<td>Define the <span class="python">AnswerList</span> variable (rename it).</td>
					</tr><tr>
						<td><span class="pBlock">make a list</span></td>
						<td>Lists</td>
						<td>Set up the <span class="python">QuestionList</span> for new items.</td>
					</tr><tr>
						<td><span class="pBlock">make a list</span></td>
						<td>Lists</td>
						<td>Set up the <span class="python">AnswerList</span> for new items.</td>
					</tr>
				</tbody>
			</table>							

			<p>The blocks should look as shown in Figure 10-3.</p>

			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img04.png">
				</div>
				<figcaption>Figure 10-3. The lists for MakeQuiz</figcaption>
			</figure>

			<p>Note that, unlike the Presidents Quiz app, the lists are defined without items in the 
				slots. This is because with MakeQuiz and TakeQuiz, all data will be created by the app 
				user (it is <em>dynamic</em>, <em>user-generated</em> data).</p>

<!-- Page 151 -->

			<div class="pagebreak">
					<span class="pageNumber"> 151 </span> Adding Behaviors to the Components
			</div>

			<section class="subsection" data-number="5" data-name="Recording the User's Entries">

				<h4>Recording the User's Entries</h4>

				<p>The first behavior you’ll build is for handling the user’s input. Specifically, when the 
					user enters a question and answer and clicks Submit, you’ll use <span class="pBlock">add item to list</span>
					blocks to update the <span class="python">QuestionList</span> and <span class="python">AnswerList</span>.
					Table 10-3 lists the blocks you’ll need.</p>

				<p class="caption">Table 10-3.Blocks for recording the user’s entries</p>

				<table>
					<thead>
						<tr>
							<th class="colExpand">Block type</th>
							<th>Drawer</th>
							<th>Purpose</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><span class="pBlock">SubmitButton.Click</span></td>
							<td>SubmitButton</td>
							<td>Triggered when the user clicks this button.</td>
						</tr>
						<tr>
							<td><span class="pBlock">add items to list</span> (2)</td>
							<td>Lists</td>
							<td>Add the data the user enters to the lists.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global QuestionList</span></td>
							<td>My Definitions</td>
							<td>Plug this into the “list” slot of the first <span class="pBlock">add items to list</span> block.</td>
						</tr>
						<tr>
							<td><span class="pBlock">QuestionText.Text</span></td>
							<td>QuestionText</td>
							<td>User’s entry; plug this into the “item” slot of the first
								<span class="pBlock">add items to list</span> block.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global AnswerList</span></td>
							<td>My Definitions</td>
							<td>Plug this into the “list” slot of the second <span class="pBlock">add items to list</span> block.</td>
						</tr>
						<tr>
							<td><span class="pBlock">AnswerText.Text</span></td>
							<td>AnswerText</td>
							<td>User’s entry; plug this into the “item” slot of the second
								<span class="pBlock">add items to list</span> block.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set QuestionsAnswersLabel.Text to</span></td>
							<td>QuestionsAnswersLabel</td>
							<td>Display the updated lists.</td>
						</tr>
						<tr>
							<td><span class="pBlock">make text</span></td>
							<td>Text</td>
							<td>Build a text object with both lists.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global QuestionList</span></td>
							<td>My Definitions</td>
							<td>The questions.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> (:)</td>
							<td>Text</td>
							<td>Place a colon between lists.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global AnswerList</span></td>
							<td>My Definitions</td>
							<td>The answers.</td>
						</tr>
					</tbody>
				</table>

				<section class="subsection" data-number="6" data-name="How the blocks work">

					<h5>How the blocks work</h5>

					<p>The <span class="pBlock">add items to list</span> block <em>appends</em>, or adds, each item to the end
						of a list. As shown in Figure 10-4, the app takes the text the user has entered in the
						<span class="python">QuestionText</span> and 
						<span class="python">AnswerText</span> text boxes and appends each to the corresponding list.</p>
					<p>The <span class="pBlock">add items to list</span> blocks update the
						<span class="python">QuestionList</span> and <span class="python">AnswerList</span> variables, 
						but these changes are not yet shown to the user. The third row of blocks displays 
						these lists by concatenating them (<span class="pBlock">make text</span>) with a colon in between. By default, 
						App Inventor displays lists with surrounding parentheses and spaces between items 
						like this: (item1 item2 item3). Of course, this is not the ideal way to display the lists, 
						but it will allow you to test the app’s behavior for now. Later, you’ll create a more 
						sophisticated method of displaying the lists that shows each question-answer pair 
						on a separate line.</p>

<!-- Page 152 -->

					<div class="pagebreak">
							<span class="pageNumber"> 152 </span> Chapter 10: MakeQuiz and TakeQuiz
					</div>

					<figure>
						<div class="centeredImage">
							<img src="/contents/appinventor/images/ch10img05.png">
						</div>
						<figcaption>Figure 10-4. Adding the new entries to the lists</figcaption>
					</figure>

					<div class="test_your_app">
							<img src="/contents/appinventor/images/test_phone.jpg">
							
							<p><span class="apptest_header">Test your app.</span>On the phone, enter a question and answer and 
								click the <span class="python normalFont">SubmitButton</span>. The app should display the single entry 
								in the <span class="python normalFont">QuestionList</span>, a colon, and then the single entry in the 
								<span class="python normalFont">AnswerList</span>. Add a second question and answer to make sure the 
								lists are being created correctly.</p>
					</div>

				</section> <!-- Section 6, How the blocks work -->

			</section> <!-- Section 5, Recording the User's Entries -->

			<section class="subsection" data-number="7" data-name="Blanking Out the Question and Answer">

				<h4>Blanking Out the Question and Answer</h4>

				<p>As you’ll recall from the Presidents Quiz app, when you moved on to the next ques-tion in the list, you
					needed to blank out the answer results from the previous ques-tion. In this app, when a user submits a
					question-answer pair, you’ll want to clear the 
					<span class="python">QuestionText</span> and <span class="python">AnswerText</span> text boxes so they’re
					ready for a new entry instead of 
					showing the previous one. To do this, add the blocks listed in Table 10-4 at the bot-tom of the
					<span class="pBlock">SubmitButton.Click</span> event handler.</p>

				<p class="caption">Table 10-4.Blocks for blanking out the question and answer text boxes</p>

				<table>
					<thead>
						<tr>
							<th class="colExpand">Block type</th>
							<th>Drawer</th>
							<th>Purpose</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><span class="pBlock">set QuestionText.Text to</span></td>
							<td>QuestionText</td>
							<td>Blank out the question.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set AnswerText.Text to</span></td>
							<td>AnswerText</td>
							<td>Blank out the answer.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> (two blank ones)</td>
							<td>Text</td>
							<td>Replace <span class="python">QuestionText</span> and <span class="python">AnswerText</span>.</td>
						</tr>
					</tbody>
				</table>

<!-- Page 153 -->

				<div class="pagebreak">
						<span class="pageNumber"> 153 </span> Adding Behaviors to the Components
				</div>

				<section class="subsection" data-number="8" data-name="How the blocks work">


					<h5>How the blocks work</h5>

					<p>When the user submits a new question and answer, they are added to their respective lists and displayed.
						At that point, the text in the <span class="python">QuestionText</span> and
						<span class="python">AnswerText</span> is 
						blanked out with empty text blocks, as shown in Figure 10-5. Note that you can create 
						an empty text block by clicking on the text within the block and pressing Delete.</p>

					<figure>
						<div class="centeredImage">
							<img src="/contents/appinventor/images/ch10img06.png">
						</div>
						<figcaption>Figure 10-5. Blanking out the question and answer text boxes after submission</figcaption>
					</figure>

					<div class="test_your_app">
							<img src="/contents/appinventor/images/test_phone.jpg">
							
							<p><span class="apptest_header">Test your app.</span>Add some questions and answers. Each time you 
								submit a pair, the <span class="python">QuestionText</span> and
								<span class="python">AnswerText</span> should be cleared so that only the hint appears
								(e.g., “Enter a question”).</p>

							<div class="clear"></div>
					</div>

				</section> <!-- Section 8, How the blocks work -->

			</section> <!-- Section 7, Blanking Out the Question and Answer -->

			<section class="subsection" data-number="9" data-name="Displaying Question-Answer Pairs on Multiple Lines">

				<h4>Displaying Question-Answer Pairs on Multiple Lines</h4>

				<p>In the app you’ve built so far, the question and answer lists are displayed separately 
					and with the default list display format for App Inventor. So, if you were making a 
					quiz on state capitals and had entered two pairs of questions and answers, it might 
					appear like so:</p>

				<p class="centeredPython">(What is the capital of California? What is the capital of New York?
					Sacramento Albany)</p>

<!-- Page 154 -->

				<div class="pagebreak">
						<span class="pageNumber"> 154 </span> Chapter 10: MakeQuiz and TakeQuiz
				</div>

				<p>As you can imagine, if someone is creating a fairly long quiz, that could get pretty 
					messy. A better display would show each question with its corresponding answer, 
					with one question-answer pair per line like this:</p>
				
				<p class="intendedText python">What is the capital of California?: Sacramento</p>
				
				<p class="intendedText python">What is the capital of New York?: Albany</p>
				
				<p>The technique for displaying a single list with each item on a separate line is described in Chapter 20 — you
					may want to read that chapter before going on.</p>
				
				<p>The task here is a bit more complicated, as you’re dealing with two lists. Because of 
					its complexity, you’ll put the blocks for it in a procedure named <span class="python">displayQAs</span>,
					and call that procedure from the <span class="pBlock">SubmitButton.Click</span> event handler.</p>
				
				<p>To display question-answer pairs on separate lines, you’ll need to do the following:</p>

				<ul>
					<li>Use a <span class="pBlock">foreach</span> block to iterate through each question in the
						<span class="python">QuestionList</span>.</li>
					<li>Use a variable <span class="python">answerIndex</span> so that you can grab each answer as you
						iterate through the questions.</li>
					<li>Use <span class="pBlock">make text to</span> build a text object with each question and answer pair,
						and a newline character (\n) separating each pair.</li>
				</ul>

				<p>You’ll need the blocks listed in Table 10-5.</p>

				<p class="caption">Table 10-5.Blocks for displaying the question-answer pairs on separate lines</p>

				<table>
					<thead>
						<tr>
							<th>Block type</th>
							<th>Drawer</th>
							<th>Purpose</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><span class="pBlock">to procedure</span> ("displayQAs")</td>
							<td>Definition</td>
							<td>This is a procedure block enclosing all other blocks.</td>
						</tr>
						<tr>
							<td><span class="pBlock">def var</span> ("answer")</td>
							<td>Definition</td>
							<td>Temporarily store each answer.</td>
						</tr>
						<tr>
							<td><span class="pBlock">def var</span> ("answerIndex")</td>
							<td>Definition</td>
							<td>Keep track of which answer (and question) the user is on.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("text")</td>
							<td>Text</td>
							<td>Initialize the variable <span class="pBlock">answer</span> to <span class="pBlock">text</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">number</span> (1)</td>
							<td>Math</td>
							<td>Initialize the variable <span class="python">answerIndex</span> to 1.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set QuestionsAnswersLabel.Text to</span></td>
							<td>My Definitions</td>
							<td>Initialize the label to empty.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("")</td>
							<td>Text</td>
							<td>Plug this into set <span class="pBlock">QuestionsAnswersLabel.Text to</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set global answerIndex to</span></td>
							<td>My Definitions</td>
							<td>Reinitialize <span class="python">answerIndex</span> each time
								<span class="pBlock">displayQAs</span> is called.</td>
						</tr>
						<tr>
							<td><span class="pBlock">number</span> (1)</td>
							<td>Math</td>
							<td>Reinitialize <span class="python">answerIndex</span> to 1.</td>
						</tr>
						<tr>
							<td><span class="pBlock">foreach</span></td>
							<td>Control</td>
							<td>Loop through the <span class="python">QuestionList</span>.</td>
						</tr>
					</tbody>
				</table>

<!-- Page 155 -->

				<div class="pagebreak">
						<span class="pageNumber"> 155 </span> Adding Behaviors to the Components
				</div>

				<p class="caption">Table 10-5.Blocks for displaying the question-answer pairs on separate lines (continued)</p>

				<table>
					<thead>
						<tr>
							<th>Block type</th>
							<th>Drawer</th>
							<th>Purpose</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><span class="pBlock">name question</span></td>
							<td>(Appears as an argument of <span class="pBlock">foreach</span>, default name is var.)</td>
							<td>Rename the <span class="pBlock">foreach</span> placeholder variable to
								<span class="pBlock">question</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global QuestionList</span></td>
							<td>My Definitions</td>
							<td>Plug this into in the “list” slot of <span class="pBlock">foreach</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set answer to</span></td>
							<td>My Definitions</td>
							<td>Set this variable each time in the <span class="pBlock">foreach</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">select list item</span></td>
							<td>Lists</td>
							<td>Select from the list AnswerList.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global AnswerList</span></td>
							<td>My Definitions</td>
							<td>Plug this into the “list” slot of <span class="pBlock">select list item</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global answerIndex</span></td>
							<td>My Definitions</td>
							<td>Plug this into the “index” slot of <span class="pBlock">select list item</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set global answerIndex to</span></td>
							<td>My Definitions</td>
							<td>Increment the index on each iteration through the loop</td>
						</tr>
						<tr>
							<td><span class="pBlock">+</span></td>
							<td>Math</td>
							<td>Increment answerIndex.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global answerIndex</span></td>
							<td>My Definitions</td>
							<td>Plug this into <span class="pBlock">+</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">number</span> (1)</td>
							<td>Math</td>
							<td>Plug this into <span class="pBlock">+</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">set QuestionsAnswersLabel.Text to</span></td>
							<td>QuestionsAnswersLabel</td>
							<td>Display the QAs.</td>
						</tr>
						<tr>
							<td><span class="pBlock">make text</span></td>
							<td>Text</td>
							<td>Build each QA pair.</td>
						</tr>
						<tr>
							<td><span class="pBlock">QuestionsAnswersLabel.Text</span></td>
							<td>QuestionsAnswersLabel</td>
							<td>As we iterate, add each new pair to the previous ones.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("\n")</td>
							<td>Text</td>
							<td>Place a newline between pairs.</td>
						</tr>
						<tr>
							<td><span class="pBlock">value question</span></td>
							<td>My Definitions</td>
							<td>This is the placeholder of the <span class="pBlock">foreach</span>; it’s the current question
								we’re processing.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> (":")</td>
							<td>Text</td>
							<td>Place a colon between the question and answer.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global answer</span></td>
							<td>My Definitions</td>
							<td>The current answer.</td>
						</tr>
					</tbody>
				</table>							

				<section class="subsection" data-number="10" data-name="How the blocks work">

					<h5>How the blocks work</h5>

					<p>The <span class="pBlock">displayQAs</span> block encapsulates all of the blocks for displaying the data,
						as shown in Figure 10-6. By using a procedure, we won’t have to have the display blocks more 
						than once in the app, and we can just call <span class="pBlock">displayQAs</span> when we need to display the 
						lists.</p>

<!-- Page 156 -->

					<div class="pagebreak">
							<span class="pageNumber"> 156 </span> Chapter 10: MakeQuiz and TakeQuiz
					</div>

					<figure>
						<div class="centeredImage">
							<img src="/contents/appinventor/images/ch10img07.png">
						</div>
						<figcaption>Figure 10-6. The displayQAs procedure</figcaption>
					</figure>

					<p>The <span class="pBlock">foreach</span> only allows you to iterate through one list. In this case,
						there are two 
						lists, and you need to select each answer as you proceed through the questions. To 
						accomplish this, we’ll use an index variable, as we did with the
						<span class="python">currentQuestionIndex</span> in the Presidents Quiz tutorial in Chapter 8.
						In this case, the index variable, 
						<span class="python">answerIndex</span>, is used to track the position in the
						<span class="python">AnswerList</span> as the <span class="pBlock">foreach</span> goes 
						through the <span class="python">QuestionList</span>.</p>

					<p><span class="python">answerIndex</span> is set to 1 before the <span class="pBlock">foreach</span>
						begins. Within the <span class="pBlock">foreach</span>, <span class="python">answerIndex</span>
						selects the current answer from the <span class="python">AnswerList</span>, and then it is incremented.
						On each iteration of the <span class="pBlock">foreach</span>, the current question and answer are
						concatenated to the end of the <span class="python">QuestionsAnswersLabel.Text</span> property, with a
						colon between them.</p>

					<section class="subsection" data-number="11" data-name="Calling the new procedure">

						<h5>Calling the new procedure</h5>

						<p>You now have a procedure for displaying the question-answer pairs, but it won’t 
							help unless you call it when you need it. Modify the <span class="pBlock">SubmitButton.Click</span> event 
							handler by calling <span class="pBlock">displayQAs</span> instead of displaying the lists with the simple
							<span class="pBlock">set QuestionsAnswersLabel.Text to</span> block. The updated blocks should appear as 
							shown in Figure 10-7.</p>

<!-- Page 157 -->

						<div class="pagebreak">
								<span class="pageNumber"> 157 </span> Adding Behaviors to the Components
						</div>

						<figure>
							<div class="centeredImage">
								<img src="/contents/appinventor/images/ch10img08.png">
							</div>
							<figcaption>Figure 10-7. Calling the displayQAs procedure from SubmitButton.Click</figcaption>
						</figure>

						<div class="test_your_app">
								<img src="/contents/appinventor/images/test_phone.jpg">
								
								<p><span class="apptest_header">Test your app.</span>On the phone, add some more question-answer pairs. 
									The display should now show each question with its corresponding 
									answer, with each question-answer pair on a separate line.</p>

								<div class="clear"></div>
						</div>

					</section> <!-- Section 11, Calling the new procedure -->

				</section> <!-- Section 10, How the blocks work -->

			</section> <!-- Section 9, Displaying Question-Answer Pairs on Multiple Lines -->

			<section class="subsection" data-number="12" data-name="Storing the Questions and Answers in a Database">

				<h4>Storing the Questions and Answers in a Database</h4>

				<p>So far, you’ve created an app that puts the entered questions and answers into a 
					list. But what happens if the quiz maker closes the app? If you’ve completed the 
					“No Texting While Driving” app (Chapter 4) or the “Android, Where’s My Car?” app 
					(Chapter 7), you know that if you don’t store the data in a database, it won’t be there 
					when the user closes and reopens the app. Storing the data persistentlywill allow the 
					quiz maker to view or edit the latest update of the quiz each time the app is opened. 
					Persistent storage is also necessary because the TakeQuiz app needs access to the 
					data as well.</p>
				
				<p>You’re already familiar with using the <span class="python">TinyDB</span> component to store and
					retrieve data in a database. But in this case, you’ll use the <span class="python">TinyWebDB</span>
					component instead. Whereas <span class="python">TinyDB</span> stores information directly on a phone,
					<span class="python">TinyWebDB</span> stores data in databases that live on the Web.</p>
				
				<p>What about your app design would merit using an online database instead of one 
					stored on a person’s phone? The key issue here is that you’re building two apps that 
					both need access to the same data—if the quiz maker stores the questions and 
					answers on her phone, the quiz takers won’t have any way of getting to the data for</p>

<!-- Page 158 -->

				<div class="pagebreak">
						<span class="pageNumber"> 158 </span> Chapter 10: MakeQuiz and TakeQuiz
				</div>

				<p>their quiz! Because <span class="python">TinyWebDB</span> stores data on the Web, the quiz taker
					can access the quiz questions and answers on a different device than the quiz maker’s. (Online data 
					storage is often referred to as <em>the cloud</em>.)</p>
				
				<p>Here’s the general scheme for making list data — like the questions and 
					answers — persistent:</p>

				<ul>
					<li>Store a list to the database each time a new item is added to it.</li>
					<li>When the app launches, load the list from the database into a variable.</li>
				</ul>

				<p>Start by storing the <span class="python">QuestionList</span> and <span class="python">AnswerList</span>
					in the database each time the user enters a new pair. You’ll add the blocks shown in Table 10-6 to the 
					<span class="pBlock">SubmitButton.Click</span> event handler.</p>

				<p class="caption">Table 10-6.The blocks for storing the data to the database</p>

				<table>
					<thead>
						<tr>
							<th>Block type</th>
							<th>Drawer</th>
							<th>Purpose</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><span class="pBlock">TinyWebDB1.StoreValue</span></td>
							<td>TinyWebDB1</td>
							<td>Store questions in the database.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("questions")</td>
							<td>Text</td>
							<td>Plug in “questions” as the tag of <span class="pBlock">StoreValue</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global QuestionList</span></td>
							<td>My Definitions </td>
							<td>Plug this into the “value” slot of <span class="pBlock">StoreValue</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">TinyWebDB1.StoreValue</span></td>
							<td>TinyWebDB1</td>
							<td>Store answers in the database.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("answers")</td>
							<td>Text</td>
							<td>Plug in “answers” as the tag of <span class="pBlock">StoreValue</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">global AnswerList</span></td>
							<td>My Definitions </td>
							<td>Plug this into the “value” slot of <span class="pBlock">StoreValue</span>.</td>
						</tr>
					</tbody>
				</table>

				<section class="subsection" data-number="13" data-name="How the blocks work">

					<h5>How the blocks work</h5>

					<p>The <span class="pBlock">TinyWebDB1.StoreValue</span> blocks store data in a web database.
						<span class="pBlock">StoreValue</span> has 
						two arguments: the tag that identifies the data and the value that is the actual data 
						you want to store. As shown in Figure 10-8, the <span class="python">QuestionList</span> is stored with
						a tag of “questions” while the <span class="python">AnswerList</span> is stored with a tag of
						“answers.”</p>
					
					<p>However, for your app, you should use tags that are more distinctive than “questions” 
						and “answers” (e.g., “DavesQuestions” and “DavesAnswers”). This is important because 
						you’re using the default web database for App Inventor, so your data (the list of questions and
						answers) can be overwritten by others, including other people following this tutorial.</p>
					
					<p>Note that the default web service is shared among programmers and apps, so it is intended only
						for testing. When you’re ready to deploy your app with real users, you’ll 
						want to set up your own private database service. Fortunately, doing so is straight-forward and
						requires no programming (see Chapter 22).</p>

<!-- Page 159 -->

					<div class="pagebreak">
							<span class="pageNumber"> 159 </span> Adding Behaviors to the Components
					</div>

					<figure>
						<div class="centeredImage">
							<img src="/contents/appinventor/images/ch10img09.png">
						</div>
						<figcaption>Figure 10-8. Storing the questions and answers in the database</figcaption>
					</figure>

					<div class="test_your_app">
						<img src="/contents/appinventor/images/test_phone.jpg">
						
						<p><span class="apptest_header">Test your app.</span>Enter a question and answer and click Submit. To 
							check if your data was stored in the database as desired, open a 
							browser and enter the URL http://appinvtinywebdb.appspot.com 
							in the address bar. The page that appears is the administrative 
							interface to the database and includes a table of tag-value pairs. If 
							you search for the tag you used in the <span class="pBlock normalFont">StoreValue</span> blocks
							(e.g., “ques-tions”), you can check the
							value stored with it. You can also click on the “/getvalue” link and enter your tag to find its
							value. Does your data appear?</p>
					</div>

				</section> <!-- Section 13, How the blocks work -->

			</section> <!-- Section 12, Storing the Questions and Answers in a Database -->

			<section class="subsection" data-number="14" data-name="Loading Data from the Database">

<!-- Page 160 -->

				<div class="pagebreak">
						<span class="pageNumber"> 160 </span> Chapter 10: MakeQuiz and TakeQuiz
				</div>

				<h4>Loeading Data from the Database</h4>

				<p>One reason we need to store the questions and answers in a database is so the per-son creating the quiz
					can close the app and relaunch it at a later time without losing 
					the questions and answers previously entered. (We also do it so the quiz taker can 
					access the questions, but we’ll cover that later.) Let’s program the blocks for loading 
					the lists back into the app from the web database each time the app is restarted.</p>
				
				<p>As we’ve covered in earlier chapters, to specify what should happen when an app 
					launches, you program the <span class="pBlock">Screen.Initialize</span> event handler. In this case, the app 
					needs to request two lists from the <span class="python">TinyWebDB</span> web database—the questions and the 
					answers—so the <span class="pBlock">Screen1.Initialize</span> will make two calls to
					<span class="pBlock">TinyWebDB.GetValue</span>.</p>
				
				<p>You’ll need the blocks listed in Table 10-7.</p>

				<p class="caption">Table 10-7.Screen.Initialize blocks for retrieving database data</p>

				<table>
					<thead>
						<tr>
							<th>Block type</th>
							<th>Drawer</th>
							<th>Purpose</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><span class="pBlock">Screen1.Initialize</span></td>
							<td>Screen1</td>
							<td>Triggered when the app begins.</td>
						</tr>
						<tr>
							<td><span class="pBlock">TinyWebDB.GetValue</span> (2)</td>
							<td>TinyWebDB</td>
							<td>Request the stored <span class="python">QuestionList</span> and
								<span class="python">AnswerList</span>.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("questions")</td>
							<td>Text</td>
							<td>Instead of “questions,” use the tag you used to store the questions.</td>
						</tr>
						<tr>
							<td><span class="pBlock">text</span> ("answers")</td>
							<td>Text</td>
							<td>Instead of “answers,” use the tag you used to store the questions.</td>
						</tr>
					</tbody>
				</table>

				<section class="subsection" data-number="15" data-name="How the blocks work">

					<h5>How the blocks work</h5>

					<p>The <span class="pBlock">TinyWebDB.GetValue</span> blocks, shown in Figure 10-9, work differently than 
						<span class="pBlock">TinyDB.GetValue</span>, which returns a value immediately.
						<span class="pBlock">TinyWebDB.GetValue</span> only 
						<em>requests</em> the data from the web database; it doesn’t immediately receive a value. 
						Instead, when the data arrives from the web database, a <span class="pBlock">TinyWebDB.GotValue</span>
						event is triggered. You must also program another event handler to process the data 
						that is returned.</p>

					<figure>
						<div class="centeredImage">
							<img src="/contents/appinventor/images/ch10img10.png">
						</div>
						<figcaption>Figure 10-9. Requesting the lists from the database when the app opens</figcaption>
					</figure>

					<p>When the <span class="pBlock">TinyWebDB.GotValue</span> event occurs, the data requested is contained in an 
						argument named <span class="python">valueFromWebDB</span>. The tag you requested is contained in the
						argument <span class="python">tagFromWebDB</span>.</p>

<!-- Page 161 -->

					<div class="pagebreak">
							<span class="pageNumber"> 161 </span> Adding Behaviors to the Components
					</div>

					<p>In this app, since two different requests are made for the questions and answers, 
						<span class="pBlock">GotValue</span> will be triggered twice. To avoid putting questions in your
						<span class="python">AnswerList</span>
						or vice versa, your app needs to check the tag to see which request has arrived, 
						and then put the value returned from the database into the corresponding list 
						(<span class="python">QuestionList</span> or <span class="python">AnswerList</span>).
						Now you’re probably realizing how useful those 
						tags really are!</p>
					
					<p>You’ll need the blocks listed in Table 10-8 for the <span class="pBlock">GotValue</span> event handler.</p>

					<p class="caption">Table 10-8.Blocks for TinyWebDB.GotValue</p>

					<table>
						<thead>
							<tr>
								<th>Block type</th>
								<th>Drawer</th>
								<th>Purpose</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><span class="pBlock">TinyWebDB.GotValue</span></td>
								<td>TinyWebDB</td>
								<td>Triggered when the data arrives.</td>
							</tr>
							<tr>
								<td><span class="pBlock">if</span></td>
								<td>Control</td>
								<td>Check if the database has any data.</td>
							</tr>
							<tr>
								<td><span class="pBlock">is a list?</span></td>
								<td>List</td>
								<td>If data is a list, it’s non-empty.</td>
							</tr>
							<tr>
								<td><span class="pBlock">value valueFromWebDB</span></td>
								<td>My Definitions</td>
								<td>The argument holding the data returned from the database.</td>
							</tr>
							<tr>
								<td><span class="pBlock">ifelse</span></td>
								<td>Control</td>
								<td>Ask which <span class="python">GetValue</span> request arrived.</td>
							</tr>
							<tr>
								<td><span class="pBlock">=</span></td>
								<td>Math</td>
								<td>Compare <span class="python">tagFromWebDB</span> to “questions.”</td>
							</tr>
							<tr>
								<td><span class="pBlock">text</span> ("questions")</td>
								<td>Text</td>
								<td>This is the tag that was used to store <span class="python">QuestionList</span>.</td>
							</tr>
							<tr>
								<td><span class="pBlock">value tagFromWebDB</span></td>
								<td>My Definitions</td>
								<td>An argument of <span class="pBlock">GotValue</span>; specifies which request.</td>
							</tr>
							<tr>
								<td><span class="pBlock">set global QuestionList to</span></td>
								<td>My Definitions</td>
								<td>If <span class="python">tagFromWebDB</span>" is “questions,” this list will be set.</td>
							</tr>
							<tr>
								<td><span class="pBlock">set global AnswerList to</span></td>
								<td>My Definitions</td>
								<td>If <span class="python">tagFromWebDB</span>" is not “questions,” this list will be set.</td>
							</tr>
							<tr>
								<td><span class="pBlock">value valueFromWebDB</span> (2)</td>
								<td>My Definitions</td>
								<td>Hold the value returned from the database.</td>
							</tr>
							<tr>
								<td><span class="pBlock">if</span></td>
								<td>Control</td>
								<td>Check if both the lists are loaded before displaying.</td>
							</tr>
							<tr>
								<td><span class="pBlock">=</span></td>
								<td>Math</td>
								<td>Compare the lengths of the lists.</td>
							</tr>
							<tr>
								<td><span class="pBlock">length of list</span> (2)</td>
								<td>Lists</td>
								<td>Check if the lengths of the lists are the same.</td>
							</tr>
							<tr>
								<td><span class="pBlock">global QuestionList</span></td>
								<td>My Definitions</td>
								<td>Plug this into one of the <span class="pBlock">length of list</span> blocks.</td>
							</tr>
							<tr>
								<td><span class="pBlock">global AnswerList</span></td>
								<td>My Definitions</td>
								<td>Plug this into the other <span class="pBlock">length of list</span> block.</td>
							</tr>
							<tr>
								<td><span class="pBlock">call displayQAs</span></td>
								<td>My Definitions</td>
								<td>Display the newly loaded questions and answers.</td>
							</tr>
						</tbody>
					</table>

				</section> <!--Section 15, How the blocks work -->

				<section class="subsection" data-number="16" data-name="How the blocks work">

					<h5>How the blocks work</h5>

					<p>The app calls <span class="pBlock">TinyWebDB1.GetValue</span> twice: once to request the stored 
						<span class="python">QuestionList</span> and once to request the stored
						<span class="python">AnswerList</span>. When the data arrives 
						from the web database from either request, the <span class="pBlock">TinyWebDB1.GotValue</span> event is 
						triggered, as shown in Figure 10-10.</p>

<!-- Page 162 -->

					<div class="pagebreak">
							<span class="pageNumber"> 162 </span> Chapter 10: MakeQuiz and TakeQuiz
					</div>

					<figure>
						<div class="centeredImage">
							<img src="/contents/appinventor/images/ch10img11.png">
						</div>
						<figcaption>Figure 10-10. GotValue is triggered when the data arrives from the Web</figcaption>
					</figure>

					<p>The <span class="python">valueFromWebDB</span> argument of <span class="pBlock">GotValue</span>
						holds the data returned from the data-base request. We need the outer <span class="pBlock">if</span>
						block in the event handler because the database will return an empty text (“”) in <span class="python">
						valueFromWebDB</span> if it’s the first time the app has been used and there aren’t yet questions and
						answers. By asking if the <span class="python">valueFromWebDB</span> <span class="pBlock">is a list?</span>,
						you’re making sure there is some data actually returned. If there isn’t any data, you’ll bypass the blocks
						for processing it.</p>
					
					<p>If data is returned (<span class="pBlock">is a list?</span> is true), the blocks go on to check
						which request has arrived. The tag identifying the data is in <span class="python">tagFromWebDB</span>:
						it will be either “questions” or “answers.” If the tag is “questions,” the
						<span class="python">valueFromWebDB</span> is put into the variable <span class="python">QuestionList</span>.
						Otherwise (else), it is placed in the <span class="python">AnswerList</span>. (If you used tags 
						other than “questions” and “answers,” check for those instead.)</p>
					
					<p>We only want to display the lists after both have arrived (<span class="pBlock">GotValue</span>
						has been triggered twice). Can you think of how you’d know for sure that you have both lists 
						loaded in from the database? These blocks use an <span class="pBlock">if</span> test to check if the
						lengths of the lists are the same, as this can only be true if both have been returned. If they are, the 
						handy <span class="pBlock">displayQAs</span> procedure you wrote earlier is called to display the loaded
						data.</p>

					<div class="test_your_app">
						<img src="/contents/appinventor/images/test_phone.jpg">
						
						<p><span class="apptest_header">Test your app.</span>Restart the app by clicking “Connect to Device...” 
							in the Blocks Editor. When the app initializes, it should display the 
							previously entered questions and answers. If you close the app and 
							restart, the previous quiz should still appear.</p>
					</div>

				</section> <!-- Section 16, How the blocks work -->

			</section> <!-- Section 14, Loading Data from the Database -->

		</section> <!-- Section 4, Adding Behaviors to the Components -->

		<section class="section" data-number="17" data-name="The Complete App: MakeQuiz">

<!-- Page 163 -->

			<div class="pagebreak">
					<span class="pageNumber"> 163 </span> The Complete App: MakeQuiz
			</div>

			<h3>The Complete App: MakeQuiz</h3>

			<p>Figure 10-11 illustrates the final blocks for the MakeQuiz app.</p>

			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img12.png">
				</div>
				<figcaption>Figure 10-11. The blocks for MakeQuiz</figcaption>
			</figure>

		</section> <!-- Section 17, The Complete App: MakeQuiz -->

		<section class="section" data-number="18" data-name="TakeQuiz: An App for Taking the Quiz in the Database">

<!-- Page 164 -->

			<div class="pagebreak">
					<span class="pageNumber"> 164 </span> Chapter 10: MakeQuiz and TakeQuiz
			</div>

			<h3>TakeQuiz: An App for Taking the Quiz in the Database</h3>

			<p>You now have a MakeQuiz app that will store a quiz in a web database. Building 
				TakeQuiz, the app that dynamically loads the quiz, is simpler. It can be built with a 
				few modifications to the Presidents Quiz you completed in Chapter 8 (if you have not 
				completed that tutorial, do so now before continuing).</p>
			
			<p>Begin by opening your Presidents Quiz app, choosing Save As, and naming the new 
				project “TakeQuiz”. This will leave your Presidents Quiz app unmodified but allow you 
				to use its blocks as the basis for TakeQuiz.</p>
			
			<p>Then make the following changes in the Designer:</p>

			<ol>
				<li>This version of MakeQuiz/TakeQuiz does not display images with each ques-tion, so
					first remove the references to images from the TakeQuiz app. In the 
					Component Designer, choose each image from the Media palette and delete it. 
					Then delete the <span class="python">Image1</span> component, which will remove all references to it from 
					the Blocks Editor.</li>
				<li>Since TakeQuiz will work with database data, drag a <span class="python">TinyWebDB</span> component into 
					the app.</li>
				<li>Because you don’t want the user to answer or click the <span class="python">NextButton</span> until the 
					questions are loaded, uncheck the <span class="python">Enabled</span> property of the
					<span class="python">AnswerButton</span> and <span class="python">NextButton</span>.</li>
			</ol>

		</section> <!-- Section 18, TakeQuiz: An App for Taking the Quiz in the Database -->

		<section class="section" data-number="19" data-name="TakeQuiz: Modifying the Blocks to
			Load the Quiz from the Database">

			<h3>TakeQuiz: Modifying the Blocks to Load the Quiz from the Database</h3>

			<p>Now modify the blocks so that the quiz given to the user is loaded from the database. 
				First, since there are no fixed questions and answers, remove all the actual question 
				and answer text blocks from the <span class="pBlock">make a list</span> blocks within the
				<span class="python">QuestionList</span> and <span class="python">AnswerList</span>. The resulting
				blocks should appear as shown in Figure 10-12.</p>

			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img13.png">
				</div>
				<figcaption>Figure 10-12. The question and answer lists now start empty</figcaption>
			</figure>

			<p>You can also completely delete the <span class="python">PictureList</span>; this app won’t deal with images. Now 
				modify your <span class="pBlock">Screen1.Initialize</span> so that it calls
				<span class="pBlock">TinyWebDB.GetValue</span> twice to load the 
				lists, just as you did in MakeQuiz. The blocks should look as they do in Figure 10-13.</p>

<!-- Page 165 -->

			<div class="pagebreak">
					<span class="pageNumber"> 165 </span> TakeQuiz: An App for Taking the Quiz in the Database
			</div>

			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img14.png">
				</div>
				<figcaption>Figure 10-13. Requesting the questions and answers from the web database</figcaption>
			</figure>

			<p>Finally, drag out a <span class="pBlock">TinyWebDB.GotValue</span> event handler. This event handler should 
				look similar to the one used in MakeQuiz, but here you want to show only the first 
				question and none of the answers. Try making these changes yourself first, and then 
				take a look at the blocks in Figure 10-14 to see if they match your solution.</p>

			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img15.png">
				</div>
				<figcaption>Figure 10-14. GotValue handles the data that arrives from the Web</figcaption>
			</figure>

			<section class="subsecetion" data-number="20" data-name="How the Blocks Work">

				<h4>How the Blocks Work</h4>

				<p>When the app begins, <span class="pBlock">Screen1.Initialize</span> is triggered and the app requests the
					questions and answers from the web database. When each request arrives, the
					<span class="pBlock">TinyWebDB.GotValue</span> event handler is triggered. The app first checks if there
					is indeed data in <span class="python">valueFromWebDB</span> using <span class="pBlock">is a list?</span>.
					If it finds data, the app asks which request has come in, using <span class="python">tagFromWebDB</span>,
					and places the <span class="python">valueFromWebDB</span> into the appropriate list.
					If the <span class="python">QuestionList</span> is being loaded, the first question is selected from
					<span class="python">QuestionList</span> and displayed. If the <span class="python">AnswerList</span> is
					being loaded, the <span class="python">AnswerButton</span> and <span class="python">NextButton</span>
					are enabled so the user can begin taking the test.</p>

<!-- Page 166 -->

				<div class="pagebreak">
						<span class="pageNumber"> 166 </span> Chapter 10: MakeQuiz and TakeQuiz
				</div>

				<div class="test_your_app">
					<img src="/contents/appinventor/images/test_phone.jpg">
					
					<p><span class="apptest_header">Test your app.</span>Restart the app by clicking “Connect to Device...” in 
						the Blocks Editor. Does the first question from your MakeQuiz quiz 
						appear? Can you take a quiz just as you did with the Presidents Quiz 
						(except for the pictures)?</p>
				</div>

			</section> <!-- Section 20, How the Blocks Work -->

		</section> <!-- Section 19, Modifying the Blocks to Load the Quiz from the Database -->

		<section class="section" data-number="21" data-name="The Complete App: TakeQuiz">

			<h3>The Complete App: TakeQuiz</h3>

			<p>Figure 10-15 illustrates the final blocks for TakeQuiz.</p>

		</section> <!-- Section 21, The Complete App: TakeQuiz -->

		<section class="section" data-number="22" data-name="Variations">

			<h3>Variations</h3>

			<p>Once you get MakeQuiz and TakeQuiz working, you might want to explore some variations. For example:</p>

			<ul>
				<li>Allow the quiz maker to specify an image for each question. Of course, you (the 
					app developer) can’t preload these images, and there is currently no way for an 
					app user to do it. So the images will need to be URLs from the Web, and the quiz 
					maker will need to enter these URLs as a third item in the MakeQuiz form. Note 
					that you can set the <span class="python">Picture</span> property of an
					<span class="python">Image</span> component to a URL.</li>
				<li>Allow the quiz maker to delete items from the questions and answers. You can 
					let the user choose a question using the <span class="python">ListPicker</span> component, and you can 
					remove an item with the <span class="pBlock">remove list item</span> block (remember to remove from 
					both lists and update the database). For help with <span class="python">ListPicker</span> and list
					deletion, see Chapter 19.</li>
				<li>Let the quiz maker name the quiz. You’ll need to store the quiz name under a 
					different tag in the database, and you’ll need to load the name along with the 
					quiz in TakeQuiz. Once you’ve loaded the name, use it to set the <span class="python">Screen.Title</span>
					property so that it appears when the user takes a quiz.</li>
				<li>Allow multiple, named quizzes to be created. You’ll need a list of quizzes, and you 
					can use each quiz name as (part of ) the tag for storing its questions and answers.</li>
			</ul>

<!-- Page 167 -->

			<div class="pagebreak">
					<span class="pageNumber"> 167 </span> Variations
			</div>

			<figure>
				<div class="centeredImage">
					<img src="/contents/appinventor/images/ch10img16.png">
				</div>
				<figcaption>Figure 10-15. The blocks for TakeQuiz</figcaption>
			</figure>

		</section> <!-- Section 22, Variations -->

		<section class="section" data-number="23" data-name="Summary">

<!-- Page 168 -->

			<div class="pagebreak">
					<span class="pageNumber"> 168 </span> Chapter 10: MakeQuiz and TakeQuiz
			</div>

			<h3>Summary</h3>

			<p>Here are some of the concepts we’ve covered in this chapter:</p>

			<ul>
				<li>Dynamic data is information input by the app’s user or loaded in from a database. A program that works
					with dynamic data is more abstract. For more information, see Chapter 19.</li>
				<li>You can store data persistently in a web database with the <span class="python">TinyWebDB</span>
					component.</li>
				<li>You retrieve data from a <span class="python">TinyWebDB</span> database by requesting it with
					<span class="pBlock">TinyWebDB.GetValue</span>. When the web database returns the data, the
					<span class="pBlock">TinyWebDB.GotValue</span> event is triggered. In the <span class="pBlock">TinyWebDB.
					GotValue</span> event handler, you can put the data in a list or process it in some way.</li>
				<li><span class="python">TinyWebDB</span> data can be shared among multiple phones and apps. Fore more
					information on (web) databases, see Chapter 22.</li>
			</ul>

		</section> <!-- Section 23, Summary -->

	</body>
</html>